<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/main :: layout}">

<div th:fragment="content">
    <h2>Products</h2>
	
	<div class="text-end mb-2" th:if="${session.loggedInUser}">
	    Logged in as <strong th:text="${session.loggedInUser}"></strong>
	</div>

	
	<a class="btn btn-primary mb-3" th:href="@{/products/create}">Add Product</a>

	   <table class="table table-striped">
	       <thead>
	       <tr>
	           <th>Name</th>
	           <th>Description</th>
	           <th>Price</th>
	           <th>Qty</th>
	       </tr>
	       </thead>

	       <tbody>
	       <tr th:each="p : ${products}">
	           <td th:text="${p.name}"></td>
	           <td th:text="${p.description}"></td>
	           <td th:text="${p.price}"></td>
	           <td th:text="${p.quantity}"></td>
			   
			   <!-- Milestone 5 delete button update and delete -->
			   <td>
				<a class="btn btn-warning btn-sm"
				 th:href="@{/products/edit/{id}(id=${p.id})}"> 
				<!-- th:href="@{/products/edit/{id}(id=${p.id})}">  -->
				Edit
				</a>
				
				<form th:action="@{/products/delete}" method="post">
					<input type="hidden" name="id" th:value="${p.id}" />
					<button type="submit"
					class = "btn btn-danger btn-sm"
					onclick="return confirm('Are you sure you want to delete this product?');">
					Delete
					</button>
				</form>
		   	   </td>
	       </tr>
	       </tbody>
	   </table>

</div>

</html>
